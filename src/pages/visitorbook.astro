---
// æ£€æµ‹æ˜¯å¦åœ¨ iframe ä¸­ï¼ˆä»…å®¢æˆ·ç«¯ç”Ÿæ•ˆï¼‰
const isEmbedded = typeof window !== 'undefined' && window.self !== window.top;
---

<!-- å¦‚æœæ˜¯åµŒå…¥æ¨¡å¼ï¼Œä¸ä½¿ç”¨ Layout -->
{isEmbedded ? (
  <div class="visitorbook-embed-only">
    <div class="visitorbook-header">
      <h1>ğŸ’¬ ç•™è¨€æ¿</h1>
      <p class="subtitle">æ¬¢è¿æ¥åˆ°ç•™è¨€æ¿ï¼è¿™é‡Œæ˜¯ä¸€ä¸ªè‡ªç”±äº¤æµçš„ç©ºé—´ï¼Œä½ å¯ä»¥ï¼š</p>

      <ul class="features-list">
        <li><span class="emoji">ğŸ’­</span> åˆ†äº«ä½ çš„æƒ³æ³•å’Œè§‚ç‚¹</li>
        <li><span class="emoji">ğŸ“</span> ç•™ä¸‹ä½ çš„å»ºè®®å’Œåé¦ˆ</li>
        <li><span class="emoji">ğŸ¨</span> è®°å½•ä½ çš„å¿ƒæƒ…å’Œæ•…äº‹</li>
        <li><span class="emoji">ğŸ¤</span> ä¸å…¶ä»–è®¿å®¢äº’åŠ¨äº¤æµ</li>
      </ul>

      <p class="welcome-text">æ— è®ºä½ æƒ³è¯´ä»€ä¹ˆï¼Œéƒ½æ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€ï¼</p>
    </div>

    <div class="notice-section">
      <h3 class="notice-title">æ¸©é¦¨æç¤ºï¼š</h3>
      <ul class="notice-list">
        <li>è¯·ä¿æŒå‹å–„å’Œå°Šé‡ï¼Œè¥é€ è‰¯å¥½çš„äº¤æµæ°›å›´</li>
        <li>æ¬¢è¿åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿå¯ä»¥æå‡ºå¯¹ç½‘ç«™çš„å»ºè®®</li>
        <li>ä½ çš„æ¯ä¸€æ¡ç•™è¨€éƒ½æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ âœ¨</li>
      </ul>
    </div>

    <div class="divider"></div>
    <div id="twikoo"></div>
  </div>
) : (
  // æ­£å¸¸æ¨¡å¼ï¼šä½¿ç”¨å®Œæ•´å¸ƒå±€
  <Layout title="ç•™è¨€æ¿">
    <div class="visitorbook-container">
      <div class="visitorbook-header">
        <h1>ğŸ’¬ ç•™è¨€æ¿</h1>
        <p class="subtitle">æ¬¢è¿æ¥åˆ°ç•™è¨€æ¿ï¼è¿™é‡Œæ˜¯ä¸€ä¸ªè‡ªç”±äº¤æµçš„ç©ºé—´ï¼Œä½ å¯ä»¥ï¼š</p>

        <ul class="features-list">
          <li><span class="emoji">ğŸ’­</span> åˆ†äº«ä½ çš„æƒ³æ³•å’Œè§‚ç‚¹</li>
          <li><span class="emoji">ğŸ“</span> ç•™ä¸‹ä½ çš„å»ºè®®å’Œåé¦ˆ</li>
          <li><span class="emoji">ğŸ¨</span> è®°å½•ä½ çš„å¿ƒæƒ…å’Œæ•…äº‹</li>
          <li><span class="emoji">ğŸ¤</span> ä¸å…¶ä»–è®¿å®¢äº’åŠ¨äº¤æµ</li>
        </ul>

        <p class="welcome-text">æ— è®ºä½ æƒ³è¯´ä»€ä¹ˆï¼Œéƒ½æ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€ï¼</p>
      </div>

      <div class="notice-section">
        <h3 class="notice-title">æ¸©é¦¨æç¤ºï¼š</h3>
        <ul class="notice-list">
          <li>è¯·ä¿æŒå‹å–„å’Œå°Šé‡ï¼Œè¥é€ è‰¯å¥½çš„äº¤æµæ°›å›´</li>
          <li>æ¬¢è¿åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿå¯ä»¥æå‡ºå¯¹ç½‘ç«™çš„å»ºè®®</li>
          <li>ä½ çš„æ¯ä¸€æ¡ç•™è¨€éƒ½æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ âœ¨</li>
        </ul>
      </div>

      <div class="divider"></div>
      <div id="twikoo"></div>
    </div>
  </Layout>
)}

<!-- Twikoo SDK å’Œåˆå§‹åŒ–è„šæœ¬ï¼ˆä¸¤ç§æ¨¡å¼éƒ½éœ€è¦ï¼‰ -->
<script src="https://cdn.jsdelivr.net/npm/twikoo@latest/dist/twikoo.all.min.js" defer></script>
<script>
  window.addEventListener('load', () => {
    if (typeof window.twikoo === 'undefined') return;
    try {
      window.twikoo.init({
        envId: "https://twikoo-api-gmgc.vercel.app/",
        el: '#twikoo',
        path: '/visitorbook',
        lang: 'zh-CN'
      });
    } catch (err) {
      console.error('Twikoo init error:', err);
    }
  });
</script>

<style>
  /* å…¬å…±æ ·å¼ */
  .visitorbook-header h1 {
    font-size: 1.8rem;
    color: #333;
    margin-bottom: 0.8rem;
    text-align: left;
  }

  .visitorbook-header .subtitle {
    color: #666;
    margin-bottom: 1rem;
    font-size: 1rem;
  }

  .features-list {
    list-style: none;
    padding-left: 0;
    margin: 1rem 0;
  }

  .features-list li {
    margin: 0.6rem 0;
    color: #555;
    display: flex;
    align-items: center;
  }

  .features-list .emoji {
    margin-right: 0.6rem;
    font-size: 1.1rem;
  }

  .welcome-text {
    color: #666;
    margin: 1.2rem 0;
    font-size: 1rem;
  }

  .notice-section {
    margin: 2rem 0;
    padding: 1.2rem;
    background-color: #f9f9f9;
    border-radius: 12px;
    border: 1px solid #eaeaea;
  }

  .notice-title {
    font-size: 1.1rem;
    color: #333;
    margin-bottom: 0.8rem;
    font-weight: 500;
  }

  .notice-list {
    list-style: none;
    padding-left: 0;
    margin: 0;
  }

  .notice-list li {
    margin: 0.6rem 0;
    color: #555;
    font-size: 0.95rem;
  }

  .divider {
    height: 4px;
    background: linear-gradient(90deg, #e0f7f1, #ffffff, #e0f7f1);
    margin: 2rem 0;
    border-radius: 2px;
  }

  #twikoo {
    margin-top: 2rem;
    width: 100%;
    min-height: 300px;
  }

  /* åµŒå…¥æ¨¡å¼ä¸“ç”¨å®¹å™¨ */
  .visitorbook-embed-only {
    max-width: 800px;
    margin: 0 auto;
    padding: 1.5rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  }

  /* å®Œæ•´é¡µé¢æ¨¡å¼å®¹å™¨ */
  .visitorbook-container {
    max-width: 800px;
    margin: 2rem auto;
    padding: 0 1.5rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
  }

  /* ç§»åŠ¨ç«¯é€‚é… */
  @media (max-width: 768px) {
    .visitorbook-embed-only,
    .visitorbook-container {
      padding: 1rem;
    }

    .visitorbook-header h1 {
      font-size: 1.6rem;
    }

    .features-list li,
    .notice-list li {
      font-size: 0.9rem;
    }

    .divider {
      height: 3px;
    }
  }
</style>
