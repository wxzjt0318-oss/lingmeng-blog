---
import Layout from '@layouts/Layout.astro';

export const frontmatter = {
	title: 'ç•™è¨€ç‰ˆ',
	description: 'æ¬¢è¿åœ¨è¿™é‡Œç•™ä¸‹ä½ çš„è¶³è¿¹å’Œæƒ³æ³•ã€‚',
	permalink: '/visitorbook',
	layout: 'page',
};
---

<Layout title="ç•™è¨€ç‰ˆ" description="æ¬¢è¿åœ¨è¿™é‡Œç•™ä¸‹ä½ çš„è¶³è¿¹å’Œæƒ³æ³•ã€‚">
  <article class="prose max-w-none dark:prose-invert">
    <h1>ğŸ’¬ ç•™è¨€æ¿</h1>
    <p>æ¬¢è¿åœ¨è¿™é‡Œåˆ†äº«ä½ çš„å¿ƒæƒ…ã€æƒ³æ³•æˆ–å»ºè®®ã€‚</p>
  </article>

  <!-- Twikoo ç•™è¨€æ¡†å®¹å™¨ -->
  <div id="twikoo-visitorbook" class="mt-8"></div>

  <style>
    #twikoo-visitorbook {
      max-width: 800px;
      margin: 0 auto;
      padding: 1rem;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--card-shadow);
    }
  </style>

  <script is:inline>
    (function() {
      if (typeof window === 'undefined') return;

      function initTwikoo() {
        const container = document.getElementById('twikoo-visitorbook');
        if (!container) {
          setTimeout(initTwikoo, 300);
          return;
        }

        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/twikoo@latest/dist/twikoo.all.min.js';
        script.onload = () => {
          if (typeof twikoo !== 'undefined') {
            twikoo.init({
              url: 'https://twikoo-api-gmgc.vercel.app',
              el: '#twikoo-visitorbook',
              path: location.pathname, // âœ… åŠ¨æ€åŒ¹é…å½“å‰è·¯å¾„
              lang: 'zh-CN',
              commentCount: true,
              inputPlaceholder: 'è¯´ç‚¹ä»€ä¹ˆå§ï½',
              emoji: [
                'https://cdn.jsdelivr.net/gh/IKnowYou233/twikoo-emoji@main/emoji.json',
                'https://cdn.jsdelivr.net/gh/IKnowYou233/twikoo-emoji@main/emoji-akashi.json'
              ],
              dark: document.documentElement.classList.contains('dark')
            }).catch(err => {
              console.error('[Twikoo] åˆå§‹åŒ–å¤±è´¥:', err);
            });
          }
        };
        script.onerror = () => {
          console.error('[Twikoo] è„šæœ¬åŠ è½½å¤±è´¥');
        };
        document.head.appendChild(script);
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initTwikoo);
      } else {
        initTwikoo();
      }
    })();
  </script>
</Layout>
